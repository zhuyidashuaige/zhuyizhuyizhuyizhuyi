/* 基础样式与背景 */
:root{
  --red:#e31d2d;
  --white:#ffffff;
  --dark:#0c0f14;
  --gold:#ffd166;
  --soft:#f5f7fa;
  --glow:rgba(255,255,255,0.08);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: "Segoe UI","PingFang SC","Hiragino Sans GB","Microsoft YaHei",system-ui,-apple-system,sans-serif;
  color:var(--soft);
  background:
    radial-gradient(1200px 800px at 10% 10%, rgba(255,255,255,0.06), transparent 60%),
    radial-gradient(1000px 700px at 90% 20%, rgba(255,0,0,0.06), transparent 60%),
    linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  overflow-x:hidden;
}

/* 全屏烟花画布 */
#bgCanvas{
  position:fixed;
  inset:0;
  width:100%;
  height:100%;
  z-index:0;
  display:block;
}

/* 开幕式层 */
#opening{
  position:fixed;
  inset:0;
  z-index:10;
  display:grid;
  place-items:center;
  background:
    radial-gradient(800px 500px at 50% -10%, rgba(255,255,255,0.10), transparent 70%),
    radial-gradient(1200px 800px at 50% 120%, rgba(227,29,45,0.18), transparent 70%),
    linear-gradient(180deg, #0b0e12 0%, #0b0e12 100%);
  transition:opacity .9s ease, visibility .9s ease, transform 1.2s cubic-bezier(.18,.9,.24,1);
}
#opening.hide{
  opacity:0;
  visibility:hidden;
  pointer-events:none;
  transform:scale(1.02);
}

.opening-inner{
  text-align:center;
  padding:24px 18px;
  max-width:860px;
  width:92%;
  backdrop-filter: blur(6px);
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
  border:1px solid rgba(255,255,255,0.12);
  border-radius:18px;
  box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 0 60px rgba(255,255,255,0.03);
  position:relative;
  overflow:hidden;
}

.flag{
  width:360px;
  max-width:70vw;
  aspect-ratio:3/2;
  margin:18px auto 22px;
  background:
    linear-gradient(to bottom, var(--red) 0 50%, var(--white) 50% 100%);
  border-radius:10px;
  box-shadow: 0 10px 40px rgba(227,29,45,.35), inset 0 0 0 2px rgba(255,255,255,.3);
  position:relative;
  overflow:hidden;
  animation: flagFloat 3.2s ease-in-out infinite;
}
.flag::before, .flag::after{
  content:"";
  position:absolute;
  inset:-40% -40%;
  background:
    radial-gradient(80% 18% at 0% 30%, rgba(255,255,255,.18), transparent 60%) repeat-x,
    radial-gradient(80% 18% at 0% 70%, rgba(0,0,0,.12), transparent 60%) repeat-x;
  background-size: 180px 180px, 180px 180px;
  background-position: 0 0, 0 0;
  mix-blend-mode: overlay;
  animation: wave 6s linear infinite;
  opacity:.65;
}
@keyframes wave{
  0%{ transform: translateX(0) skewY(0deg); }
  50%{ transform: translateX(-180px) skewY(2.4deg); }
  100%{ transform: translateX(-360px) skewY(0deg); }
}
@keyframes flagFloat{
  0%,100%{ transform: translateY(0) rotate(-0.6deg); }
  50%{ transform: translateY(-6px) rotate(0.6deg); }
}

.title-cn{
  font-size: clamp(26px, 5.2vw, 56px);
  margin: 8px 0 6px;
  letter-spacing: 1px;
  color:#fff;
  text-shadow: 0 6px 30px rgba(227,29,45,.45), 0 2px 0 rgba(0,0,0,.25);
}
.title-id{
  font-size: clamp(18px, 3.4vw, 30px);
  margin: 4px 0 10px;
  color: #ffdedd;
  letter-spacing:.5px;
}
.subtitle{
  font-size: clamp(14px, 2.5vw, 18px);
  color:#eaeaea;
  opacity:.92;
  margin: 0 0 14px;
}

.btn{
  margin: 10px auto 12px;
  padding: 12px 22px;
  font-size: 16px;
  color:#fff;
  background:
    linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.04));
  border: 1px solid rgba(255,255,255,.28);
  border-radius: 999px;
  cursor:pointer;
  transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
  box-shadow: 0 10px 30px rgba(227,29,45,.25), inset 0 0 0 1px rgba(255,255,255,.05);
  position:relative;
}
.btn::before{
  content:"";
  position:absolute; inset:-2px;
  border-radius:999px;
  background: linear-gradient(90deg, var(--red), #ff8f90, var(--white));
  z-index:-1;
  filter: blur(10px);
  opacity:.35;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 16px 38px rgba(227,29,45,.35); }
.btn:active{ transform: translateY(0); }

.btn-accept{ background: linear-gradient(180deg, #4ade80, #22c55e); }
.btn-decline{ background: linear-gradient(180deg, #f87171, #ef4444); }
.btn-restart{ background: linear-gradient(180deg, #60a5fa, #3b82f6); }

/* 飘动的爱心 */
.floating-hearts{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.floating-hearts span{
  position:absolute;
  bottom:-10%;
  font-size: clamp(14px, 3.2vw, 22px);
  color:#ff6b8f;
  text-shadow: 0 6px 24px rgba(255,107,143,.55);
  animation: floatUp linear infinite;
  opacity:.8;
}
@keyframes floatUp{
  0%{ transform: translateY(0) translateX(0) scale(0.8); opacity:.0; }
  10%{ opacity:.9; }
  100%{ transform: translateY(-120vh) translateX(40px) scale(1.2); opacity:0; }
}
/* 随机分布与时序 */
.floating-hearts span:nth-child(1){ left:6%;  animation-duration:10s; animation-delay:0.2s;}
.floating-hearts span:nth-child(2){ left:16%; animation-duration:12s; animation-delay:1.0s;}
.floating-hearts span:nth-child(3){ left:26%; animation-duration:11s; animation-delay:0.6s;}
.floating-hearts span:nth-child(4){ left:36%; animation-duration:13s; animation-delay:1.4s;}
.floating-hearts span:nth-child(5){ left:46%; animation-duration:10.5s; animation-delay:0.4s;}
.floating-hearts span:nth-child(6){ left:56%; animation-duration:12.3s; animation-delay:1.2s;}
.floating-hearts span:nth-child(7){ left:66%; animation-duration:11.6s; animation-delay:0.8s;}
.floating-hearts span:nth-child(8){ left:76%; animation-duration:13.2s; animation-delay:1.6s;}
.floating-hearts span:nth-child(9){ left:86%; animation-duration:10.8s; animation-delay:0.3s;}
.floating-hearts span:nth-child(10){ left:12%; animation-duration:12.8s; animation-delay:1.1s;}
.floating-hearts span:nth-child(11){ left:52%; animation-duration:11.2s; animation-delay:0.7s;}
.floating-hearts span:nth-child(12){ left:72%; animation-duration:13.6s; animation-delay:1.7s;}

/* 主视觉区域 */
.hero{
  position:relative;
  z-index:1;
  min-height:100vh;
  display:grid;
  place-items:center;
  text-align:center;
  padding: 80px 16px 40px;
}
.hero-inner{
  max-width: 900px;
  width: min(92%, 900px);
  padding: 28px 22px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
  border-radius:18px;
  backdrop-filter: blur(6px);
  box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 0 60px rgba(255,255,255,0.03);
}
.hero-title{
  font-size: clamp(28px, 6vw, 64px);
  margin: 8px 0 6px;
  color:#fff;
  text-shadow: 0 8px 34px rgba(227,29,45,.4);
}
.hero-subtitle{
  font-size: clamp(16px, 3.2vw, 20px);
  line-height:1.8;
  color:#f3f3f3;
  margin: 10px 0 6px;
}
.hero-note{
  font-size: clamp(14px, 2.8vw, 18px);
  color:#ffe5a8;
  margin: 8px 0 0;
}

/* 模态弹窗 */
.modal{
  position: fixed;
  inset: 0;
  z-index: 100;
  display: none;
  place-items: center;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(8px);
}
.modal.show{ display: grid; }

.modal-content{
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 20px;
  padding: 30px 25px;
  text-align: center;
  max-width: 90vw;
  width: 400px;
  backdrop-filter: blur(10px);
  box-shadow: 0 25px 50px rgba(0,0,0,0.5);
}

.invite-title{
  font-size: clamp(20px, 4vw, 28px);
  color: #fff;
  margin: 0 0 15px;
}
.invite-text{
  font-size: clamp(16px, 3vw, 18px);
  color: #f0f0f0;
  margin: 0 0 8px;
}
.invite-subtitle{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
  margin: 0 0 20px;
}
.invite-buttons{
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

/* 游戏容器 */
.game-container{
  position: fixed;
  inset: 0;
  z-index: 50;
  display: none;
  flex-direction: column;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  padding: 20px;
  overflow: hidden;
}
.game-container.show{ display: flex; }

.game-header{
  text-align: center;
  margin-bottom: 20px;
}
.game-header h2{
  font-size: clamp(18px, 4vw, 24px);
  color: #fff;
  margin: 0 0 8px;
}
.game-header p{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
  margin: 0;
}

/* 赛道 */
.race-track{
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
  justify-content: center;
  max-height: 300px;
}

.track{
  position: relative;
  height: 80px;
  background: linear-gradient(90deg, #1e293b 0%, #334155 50%, #1e293b 100%);
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.1);
  overflow: hidden;
}

.track-label{
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: bold;
  color: #fff;
  font-size: clamp(14px, 2.5vw, 16px);
}

.boat{
  position: absolute;
  left: 60px;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  background: #e31d2d;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: left 0.1s ease;
  box-shadow: 0 4px 15px rgba(227,29,45,0.4);
}

.boat-avatar{
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

.avatar-fallback{
  font-size: 24px;
  display: none;
}

.finish-line{
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
}

/* 点击区域 */
.click-area{
  margin: 20px 0;
  padding: 40px 20px;
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
  border: 2px solid rgba(255,255,255,0.15);
  border-radius: 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  user-select: none;
}
.click-area:hover{
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  transform: scale(1.02);
}
.click-area:active{
  transform: scale(0.98);
}

.click-prompt{
  font-size: clamp(16px, 3vw, 20px);
  color: #fff;
  margin-bottom: 10px;
}
.click-counter{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
}

/* 下一页面 */
.next-page{
  position: fixed;
  inset: 0;
  z-index: 200;
  display: none;
  place-items: center;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  text-align: center;
}
.next-page.show{ display: grid; }

.next-content h1{
  font-size: clamp(24px, 6vw, 48px);
  color: #fff;
  margin: 0 0 20px;
  text-shadow: 0 8px 30px rgba(227,29,45,.4);
}
.next-content p{
  font-size: clamp(16px, 3vw, 20px);
  color: #f0f0f0;
  margin: 10px 0;
}

.celebration{
  font-size: clamp(24px, 5vw, 40px);
  margin-top: 20px;
}
.celebration span{
  display: inline-block;
  animation: bounce 2s infinite;
}
.celebration span:nth-child(2){ animation-delay: 0.2s; }
.celebration span:nth-child(3){ animation-delay: 0.4s; }
.celebration span:nth-child(4){ animation-delay: 0.6s; }
.celebration span:nth-child(5){ animation-delay: 0.8s; }

@keyframes bounce{
  0%, 20%, 50%, 80%, 100%{ transform: translateY(0); }
  40%{ transform: translateY(-20px); }
  60%{ transform: translateY(-10px); }
}

/* 页脚 */
.footer{
  position:relative;
  z-index:1;
  text-align:center;
  padding: 16px 0 28px;
  color:#d9d9d9;
  opacity:.9;
}

/* 响应式微调 */
@media (max-width:480px){
  .opening-inner{ padding:18px 14px; }
  .hero-inner{ padding:22px 16px; }
  .invite-buttons{ flex-direction: column; align-items: center; }
  .track{ height: 60px; }
  .boat{ width: 40px; height: 40px; }
  .boat-avatar{ width: 30px; height: 30px; }
}

/* 河道与波浪 */
.race-track.river{
  position: relative;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 18px;
  justify-content: center;
  border-radius: 16px;
  overflow: hidden;
  border: 2px solid rgba(255,255,255,0.12);
  background:
    linear-gradient(180deg, rgba(20,35,58,0.9), rgba(12,24,42,0.95)),
    radial-gradient(800px 300px at 50% -20%, rgba(255,255,255,0.06), transparent 70%);
  box-shadow: inset 0 0 80px rgba(0,0,0,0.45);
}
.river .waves{
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(circle at 10% 50%, rgba(255,255,255,0.18) 0 2px, transparent 3px) 0 0/120px 60px,
    radial-gradient(circle at 60% 40%, rgba(255,255,255,0.12) 0 2px, transparent 3px) 0 0/140px 70px,
    radial-gradient(circle at 90% 60%, rgba(255,255,255,0.12) 0 2px, transparent 3px) 0 0/160px 80px;
  mix-blend-mode: overlay;
  animation: waveMove 14s linear infinite;
  opacity: .35;
}
@keyframes waveMove{
  0%{ background-position: 0 0, 0 0, 0 0; }
  100%{ background-position: -600px 0, 400px 0, -300px 0; }
}

/* 航线（河道中的两条赛道） */
.lane{
  position: relative;
  height: 90px;
  border: 2px dashed rgba(255,255,255,0.18);
  border-left: none; border-right: none;
  background: linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  overflow: hidden;
}
.track-label{
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: bold;
  color: #fff;
  font-size: clamp(14px, 2.5vw, 16px);
  text-shadow: 0 3px 10px rgba(0,0,0,.35);
}
.finish-line{
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,.4));
}

/* 船体与划桨 */
.boat{
  position: absolute;
  left: 60px;
  top: 50%;
  transform: translateY(-50%);
  width: 84px; /* 船总宽，用于露出船头 */
  height: 54px;
  display: grid;
  place-items: center;
  transition: left 0.1s ease;
}
.hull{
  position: relative;
  width: 74px;
  height: 26px;
  background: linear-gradient(180deg, #c2410c, #9a3412);
  border-radius: 14px 18px 18px 14px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.35), inset 0 -4px 8px rgba(0,0,0,0.25);
}
.hull::after{ /* 船头尖 */
  content:"";
  position:absolute;
  right:-10px; top:4px; bottom:4px;
  width: 16px;
  background: linear-gradient(180deg, #d97706, #b45309);
  clip-path: polygon(0 0, 100% 50%, 0 100%);
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.3));
}

/* 船上头像（坐在船中央） */
.boat-avatar{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-60%);
  width: 34px; height: 34px;
  border-radius: 50%;
  border: 2px solid #fff;
  object-fit: cover;
  box-shadow: 0 6px 14px rgba(0,0,0,.35);
}
.avatar-fallback{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-60%);
  font-size: 20px;
  display: none;
}

/* 划桨（左右各一只） */
.paddle{
  position: absolute;
  width: 34px; height: 8px;
  background: #9ca3af;
  top: 50%; transform-origin: 6px 4px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,.3);
}
.paddle::after{ /* 桨叶 */
  content:"";
  position: absolute;
  right:-10px; top:-4px;
  width: 16px; height: 16px;
  background: #d1d5db;
  border-radius: 4px 10px 10px 4px;
}
.paddle.left{ left: -2px; transform: translateY(-50%) rotate(-18deg); }
.paddle.right{ left: 8px; transform: translateY(-50%) rotate(18deg); }

@keyframes row{
  0%{ transform: translateY(-50%) rotate(-18deg); }
  50%{ transform: translateY(-50%) rotate(18deg); }
  100%{ transform: translateY(-50%) rotate(-18deg); }
}
@keyframes rowR{
  0%{ transform: translateY(-50%) rotate(18deg); }
  50%{ transform: translateY(-50%) rotate(-18deg); }
  100%{ transform: translateY(-50%) rotate(18deg); }
}

/* 默认持续划桨；boost 时提速 */
.boat .paddle.left{ animation: row .6s linear infinite; }
.boat .paddle.right{ animation: rowR .6s linear infinite; }
.boat.boost .paddle.left{ animation-duration: .28s; }
.boat.boost .paddle.right{ animation-duration: .28s; }

/* 观众区 */
.crowd{
  height: 90px;
  margin-top: 12px;
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.12);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)),
    radial-gradient(600px 180px at 50% 120%, rgba(227,29,45,.18), transparent 70%);
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 6px;
  padding: 8px;
  overflow: hidden;
}
.fan{
  display: grid;
  place-items: center;
  font-size: 18px;
  color:#fff;
  opacity:.85;
  transform: translateY(0);
  transition: transform .2s ease, opacity .2s ease;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.35));
}
.fan::after{
  content: attr(data-shout);
  display:block;
  font-size: 10px;
  margin-top: 2px;
  color: #ffd166;
  opacity:.75;
}
.fan.yell{
  transform: translateY(-8px) scale(1.1);
  opacity: 1;
}

/* 小屏优化 */
@media (max-width:480px){
  .lane{ height: 70px; }
  .boat{ width: 72px; height: 48px; }
  .hull{ width: 64px; height: 22px; }
  .boat-avatar{ width: 30px; height: 30px; }
  .paddle{ width: 28px; height: 7px; }
  .paddle::after{ width: 14px; height: 14px; }
}

.btn::before{
  content:"";
  position:absolute; inset:-2px;
  border-radius:999px;
  background: linear-gradient(90deg, var(--red), #ff8f90, var(--white));
  z-index:-1;
  filter: blur(10px);
  opacity:.35;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 16px 38px rgba(227,29,45,.35); }
.btn:active{ transform: translateY(0); }

.btn-accept{ background: linear-gradient(180deg, #4ade80, #22c55e); }
.btn-decline{ background: linear-gradient(180deg, #f87171, #ef4444); }
.btn-restart{ background: linear-gradient(180deg, #60a5fa, #3b82f6); }

/* 飘动的爱心 */
.floating-hearts{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.floating-hearts span{
  position:absolute;
  bottom:-10%;
  font-size: clamp(14px, 3.2vw, 22px);
  color:#ff6b8f;
  text-shadow: 0 6px 24px rgba(255,107,143,.55);
  animation: floatUp linear infinite;
  opacity:.8;
}
@keyframes floatUp{
  0%{ transform: translateY(0) translateX(0) scale(0.8); opacity:.0; }
  10%{ opacity:.9; }
  100%{ transform: translateY(-120vh) translateX(40px) scale(1.2); opacity:0; }
}
/* 随机分布与时序 */
.floating-hearts span:nth-child(1){ left:6%;  animation-duration:10s; animation-delay:0.2s;}
.floating-hearts span:nth-child(2){ left:16%; animation-duration:12s; animation-delay:1.0s;}
.floating-hearts span:nth-child(3){ left:26%; animation-duration:11s; animation-delay:0.6s;}
.floating-hearts span:nth-child(4){ left:36%; animation-duration:13s; animation-delay:1.4s;}
.floating-hearts span:nth-child(5){ left:46%; animation-duration:10.5s; animation-delay:0.4s;}
.floating-hearts span:nth-child(6){ left:56%; animation-duration:12.3s; animation-delay:1.2s;}
.floating-hearts span:nth-child(7){ left:66%; animation-duration:11.6s; animation-delay:0.8s;}
.floating-hearts span:nth-child(8){ left:76%; animation-duration:13.2s; animation-delay:1.6s;}
.floating-hearts span:nth-child(9){ left:86%; animation-duration:10.8s; animation-delay:0.3s;}
.floating-hearts span:nth-child(10){ left:12%; animation-duration:12.8s; animation-delay:1.1s;}
.floating-hearts span:nth-child(11){ left:52%; animation-duration:11.2s; animation-delay:0.7s;}
.floating-hearts span:nth-child(12){ left:72%; animation-duration:13.6s; animation-delay:1.7s;}

/* 主视觉区域 */
.hero{
  position:relative;
  z-index:1;
  min-height:100vh;
  display:grid;
  place-items:center;
  text-align:center;
  padding: 80px 16px 40px;
}
.hero-inner{
  max-width: 900px;
  width: min(92%, 900px);
  padding: 28px 22px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
  border-radius:18px;
  backdrop-filter: blur(6px);
  box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 0 60px rgba(255,255,255,0.03);
}
.hero-title{
  font-size: clamp(28px, 6vw, 64px);
  margin: 8px 0 6px;
  color:#fff;
  text-shadow: 0 8px 34px rgba(227,29,45,.4);
}
.hero-subtitle{
  font-size: clamp(16px, 3.2vw, 20px);
  line-height:1.8;
  color:#f3f3f3;
  margin: 10px 0 6px;
}
.hero-note{
  font-size: clamp(14px, 2.8vw, 18px);
  color:#ffe5a8;
  margin: 8px 0 0;
}

/* 模态弹窗 */
.modal{
  position: fixed;
  inset: 0;
  z-index: 100;
  display: none;
  place-items: center;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(8px);
}
.modal.show{ display: grid; }

.modal-content{
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 20px;
  padding: 30px 25px;
  text-align: center;
  max-width: 90vw;
  width: 400px;
  backdrop-filter: blur(10px);
  box-shadow: 0 25px 50px rgba(0,0,0,0.5);
}

.invite-title{
  font-size: clamp(20px, 4vw, 28px);
  color: #fff;
  margin: 0 0 15px;
}
.invite-text{
  font-size: clamp(16px, 3vw, 18px);
  color: #f0f0f0;
  margin: 0 0 8px;
}
.invite-subtitle{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
  margin: 0 0 20px;
}
.invite-buttons{
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}
.game-container{
  position: fixed;
  inset: 0;
  z-index: 50;
  display: none;
  flex-direction: column;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  padding: 20px;
  overflow: hidden;
}
.game-container.show{ display: flex; }

.game-header{
  text-align: center;
  margin-bottom: 20px;
}
.game-header h2{
  font-size: clamp(18px, 4vw, 24px);
  color: #fff;
  margin: 0 0 8px;
}
.game-header p{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
  margin: 0;
}

/* 赛道 */
.race-track{
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
  justify-content: center;
  max-height: 300px;
}

.track{
  position: relative;
  height: 80px;
  background: linear-gradient(90deg, #1e293b 0%, #334155 50%, #1e293b 100%);
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.1);
  overflow: hidden;
}

.track-label{
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: bold;
  color: #fff;
  font-size: clamp(14px, 2.5vw, 16px);
}

.boat{
  position: absolute;
  left: 60px;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  background: #e31d2d;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: left 0.1s ease;
  box-shadow: 0 4px 15px rgba(227,29,45,0.4);
}

.boat-avatar{
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

.avatar-fallback{
  font-size: 24px;
  display: none;
}

.finish-line{
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
}

/* 点击区域 */
.click-area{
  margin: 20px 0;
  padding: 40px 20px;
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
  border: 2px solid rgba(255,255,255,0.15);
  border-radius: 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  user-select: none;
}
.click-area:hover{
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  transform: scale(1.02);
}
.click-area:active{
  transform: scale(0.98);
}

.click-prompt{
  font-size: clamp(16px, 3vw, 20px);
  color: #fff;
  margin-bottom: 10px;
}
.click-counter{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
}

/* 下一页面 */
.next-page{
  position: fixed;
  inset: 0;
  z-index: 200;
  display: none;
  place-items: center;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  text-align: center;
}
.next-page.show{ display: grid; }

.next-content h1{
  font-size: clamp(24px, 6vw, 48px);
  color: #fff;
  margin: 0 0 20px;
  text-shadow: 0 8px 30px rgba(227,29,45,.4);
}
.next-content p{
  font-size: clamp(16px, 3vw, 20px);
  color: #f0f0f0;
  margin: 10px 0;
}

.celebration{
  font-size: clamp(24px, 5vw, 40px);
  margin-top: 20px;
}
.celebration span{
  display: inline-block;
  animation: bounce 2s infinite;
}
.celebration span:nth-child(2){ animation-delay: 0.2s; }
.celebration span:nth-child(3){ animation-delay: 0.4s; }
.celebration span:nth-child(4){ animation-delay: 0.6s; }
.celebration span:nth-child(5){ animation-delay: 0.8s; }

@keyframes bounce{
  0%, 20%, 50%, 80%, 100%{ transform: translateY(0); }
  40%{ transform: translateY(-20px); }
  60%{ transform: translateY(-10px); }
}

/* 页脚 */
.footer{
  position:relative;
  z-index:1;
  text-align:center;
  padding: 16px 0 28px;
  color:#d9d9d9;
  opacity:.9;
}

/* 响应式微调 */
@media (max-width:480px){
  .opening-inner{ padding:18px 14px; }
  .hero-inner{ padding:22px 16px; }
  .invite-buttons{ flex-direction: column; align-items: center; }
  .track{ height: 60px; }
  .boat{ width: 40px; height: 40px; }
  .boat-avatar{ width: 30px; height: 30px; }
}

/* 河道与波浪 */
.race-track.river{
  position: relative;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 18px;
  justify-content: center;
  border-radius: 16px;
  overflow: hidden;
  border: 2px solid rgba(255,255,255,0.12);
  background:
    linear-gradient(180deg, rgba(20,35,58,0.9), rgba(12,24,42,0.95)),
    radial-gradient(800px 300px at 50% -20%, rgba(255,255,255,0.06), transparent 70%);
  box-shadow: inset 0 0 80px rgba(0,0,0,0.45);
}
.river .waves{
  position:absolute;
  inset:0;
  pointer-events:none;
  background:
    radial-gradient(circle at 10% 50%, rgba(255,255,255,0.18) 0 2px, transparent 3px) 0 0/120px 60px,
    radial-gradient(circle at 60% 40%, rgba(255,255,255,0.12) 0 2px, transparent 3px) 0 0/140px 70px,
    radial-gradient(circle at 90% 60%, rgba(255,255,255,0.12) 0 2px, transparent 3px) 0 0/160px 80px;
  mix-blend-mode: overlay;
  animation: waveMove 14s linear infinite;
  opacity: .35;
}
@keyframes waveMove{
  0%{ background-position: 0 0, 0 0, 0 0; }
  100%{ background-position: -600px 0, 400px 0, -300px 0; }
}

/* 航线（河道中的两条赛道） */
.lane{
  position: relative;
  height: 90px;
  border: 2px dashed rgba(255,255,255,0.18);
  border-left: none; border-right: none;
  background: linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  overflow: hidden;
}
.track-label{
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: bold;
  color: #fff;
  font-size: clamp(14px, 2.5vw, 16px);
  text-shadow: 0 3px 10px rgba(0,0,0,.35);
}
.finish-line{
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,.4));
}

/* 船体与划桨 */
.boat{
  position: absolute;
  left: 60px;
  top: 50%;
  transform: translateY(-50%);
  width: 84px; /* 船总宽，用于露出船头 */
  height: 54px;
  display: grid;
  place-items: center;
  transition: left 0.1s ease;
}
.hull{
  position: relative;
  width: 74px;
  height: 26px;
  background: linear-gradient(180deg, #c2410c, #9a3412);
  border-radius: 14px 18px 18px 14px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.35), inset 0 -4px 8px rgba(0,0,0,0.25);
}
.hull::after{ /* 船头尖 */
  content:"";
  position:absolute;
  right:-10px; top:4px; bottom:4px;
  width: 16px;
  background: linear-gradient(180deg, #d97706, #b45309);
  clip-path: polygon(0 0, 100% 50%, 0 100%);
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.3));
}

/* 船上头像（坐在船中央） */
.boat-avatar{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-60%);
  width: 34px; height: 34px;
  border-radius: 50%;
  border: 2px solid #fff;
  object-fit: cover;
  box-shadow: 0 6px 14px rgba(0,0,0,.35);
}
.avatar-fallback{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-60%);
  font-size: 20px;
  display: none;
}

/* 划桨（左右各一只） */
.paddle{
  position: absolute;
  width: 34px; height: 8px;
  background: #9ca3af;
  top: 50%; transform-origin: 6px 4px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,.3);
}
.paddle::after{ /* 桨叶 */
  content:"";
  position: absolute;
  right:-10px; top:-4px;
  width: 16px; height: 16px;
  background: #d1d5db;
  border-radius: 4px 10px 10px 4px;
}
.paddle.left{ left: -2px; transform: translateY(-50%) rotate(-18deg); }
.paddle.right{ left: 8px; transform: translateY(-50%) rotate(18deg); }

@keyframes row{
  0%{ transform: translateY(-50%) rotate(-18deg); }
  50%{ transform: translateY(-50%) rotate(18deg); }
  100%{ transform: translateY(-50%) rotate(-18deg); }
}
@keyframes rowR{
  0%{ transform: translateY(-50%) rotate(18deg); }
  50%{ transform: translateY(-50%) rotate(-18deg); }
  100%{ transform: translateY(-50%) rotate(18deg); }
}

/* 默认持续划桨；boost 时提速 */
.boat .paddle.left{ animation: row .6s linear infinite; }
.boat .paddle.right{ animation: rowR .6s linear infinite; }
.boat.boost .paddle.left{ animation-duration: .28s; }
.boat.boost .paddle.right{ animation-duration: .28s; }

/* 观众区 */
.crowd{
  height: 90px;
  margin-top: 12px;
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.12);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)),
    radial-gradient(600px 180px at 50% 120%, rgba(227,29,45,.18), transparent 70%);
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 6px;
  padding: 8px;
  overflow: hidden;
}
.fan{
  display: grid;
  place-items: center;
  font-size: 18px;
  color:#fff;
  opacity:.85;
  transform: translateY(0);
  transition: transform .2s ease, opacity .2s ease;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.35));
}
.fan::after{
  content: attr(data-shout);
  display:block;
  font-size: 10px;
  margin-top: 2px;
  color: #ffd166;
  opacity:.75;
}
.fan.yell{
  transform: translateY(-8px) scale(1.1);
  opacity: 1;
}

/* 小屏优化 */
@media (max-width:480px){
  .lane{ height: 70px; }
  .boat{ width: 72px; height: 48px; }
  .hull{ width: 64px; height: 22px; }
  .boat-avatar{ width: 30px; height: 30px; }
  .paddle{ width: 28px; height: 7px; }
  .paddle::after{ width: 14px; height: 14px; }
}

.btn::before{
  content:"";
  position:absolute; inset:-2px;
  border-radius:999px;
  background: linear-gradient(90deg, var(--red), #ff8f90, var(--white));
  z-index:-1;
  filter: blur(10px);
  opacity:.35;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 16px 38px rgba(227,29,45,.35); }
.btn:active{ transform: translateY(0); }

.btn-accept{ background: linear-gradient(180deg, #4ade80, #22c55e); }
.btn-decline{ background: linear-gradient(180deg, #f87171, #ef4444); }
.btn-restart{ background: linear-gradient(180deg, #60a5fa, #3b82f6); }

/* 飘动的爱心 */
.floating-hearts{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.floating-hearts span{
  position:absolute;
  bottom:-10%;
  font-size: clamp(14px, 3.2vw, 22px);
  color:#ff6b8f;
  text-shadow: 0 6px 24px rgba(255,107,143,.55);
  animation: floatUp linear infinite;
  opacity:.8;
}
@keyframes floatUp{
  0%{ transform: translateY(0) translateX(0) scale(0.8); opacity:.0; }
  10%{ opacity:.9; }
  100%{ transform: translateY(-120vh) translateX(40px) scale(1.2); opacity:0; }
}
/* 随机分布与时序 */
.floating-hearts span:nth-child(1){ left:6%;  animation-duration:10s; animation-delay:0.2s;}
.floating-hearts span:nth-child(2){ left:16%; animation-duration:12s; animation-delay:1.0s;}
.floating-hearts span:nth-child(3){ left:26%; animation-duration:11s; animation-delay:0.6s;}
.floating-hearts span:nth-child(4){ left:36%; animation-duration:13s; animation-delay:1.4s;}
.floating-hearts span:nth-child(5){ left:46%; animation-duration:10.5s; animation-delay:0.4s;}
.floating-hearts span:nth-child(6){ left:56%; animation-duration:12.3s; animation-delay:1.2s;}
.floating-hearts span:nth-child(7){ left:66%; animation-duration:11.6s; animation-delay:0.8s;}
.floating-hearts span:nth-child(8){ left:76%; animation-duration:13.2s; animation-delay:1.6s;}
.floating-hearts span:nth-child(9){ left:86%; animation-duration:10.8s; animation-delay:0.3s;}
.floating-hearts span:nth-child(10){ left:12%; animation-duration:12.8s; animation-delay:1.1s;}
.floating-hearts span:nth-child(11){ left:52%; animation-duration:11.2s; animation-delay:0.7s;}
.floating-hearts span:nth-child(12){ left:72%; animation-duration:13.6s; animation-delay:1.7s;}

/* 主视觉区域 */
.hero{
  position:relative;
  z-index:1;
  min-height:100vh;
  display:grid;
  place-items:center;
  text-align:center;
  padding: 80px 16px 40px;
}
.hero-inner{
  max-width: 900px;
  width: min(92%, 900px);
  padding: 28px 22px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
  border-radius:18px;
  backdrop-filter: blur(6px);
  box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 0 60px rgba(255,255,255,0.03);
}
.hero-title{
  font-size: clamp(28px, 6vw, 64px);
  margin: 8px 0 6px;
  color:#fff;
  text-shadow: 0 8px 34px rgba(227,29,45,.4);
}
.hero-subtitle{
  font-size: clamp(16px, 3.2vw, 20px);
  line-height:1.8;
  color:#f3f3f3;
  margin: 10px 0 6px;
}
.hero-note{
  font-size: clamp(14px, 2.8vw, 18px);
  color:#ffe5a8;
  margin: 8px 0 0;
}

/* 模态弹窗 */
.modal{
  position: fixed;
  inset: 0;
  z-index: 100;
  display: none;
  place-items: center;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(8px);
}
.modal.show{ display: grid; }

.modal-content{
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 20px;
  padding: 30px 25px;
  text-align: center;
  max-width: 90vw;
  width: 400px;
  backdrop-filter: blur(10px);
  box-shadow: 0 25px 50px rgba(0,0,0,0.5);
}

.invite-title{
  font-size: clamp(20px, 4vw, 28px);
  color: #fff;
  margin: 0 0 15px;
}
.invite-text{
  font-size: clamp(16px, 3vw, 18px);
  color: #f0f0f0;
  margin: 0 0 8px;
}
.invite-subtitle{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
  margin: 0 0 20px;
}
.invite-buttons{
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}
.game-container{
  position: fixed;
  inset: 0;
  z-index: 50;
  display: none;
  flex-direction: column;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  padding: 20px;
  overflow: hidden;
}
.game-container.show{ display: flex; }

.game-header{
  text-align: center;
  margin-bottom: 20px;
}
.game-header h2{
  font-size: clamp(18px, 4vw, 24px);
  color: #fff;
  margin: 0 0 8px;
}
.game-header p{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
  margin: 0;
}

/* 赛道 */
.race-track{
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
  justify-content: center;
  max-height: 300px;
}

.track{
  position: relative;
  height: 80px;
  background: linear-gradient(90deg, #1e293b 0%, #334155 50%, #1e293b 100%);
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.1);
  overflow: hidden;
}

.track-label{
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: bold;
  color: #fff;
  font-size: clamp(14px, 2.5vw, 16px);
}

.boat{
  position: absolute;
  left: 60px;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  background: #e31d2d;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: left 0.1s ease;
  box-shadow: 0 4px 15px rgba(227,29,45,0.4);
}

.boat-avatar{
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

.avatar-fallback{
  font-size: 24px;
  display: none;
}

.finish-line{
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
}

/* 点击区域 */
.click-area{
  margin: 20px 0;
  padding: 40px 20px;
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
  border: 2px solid rgba(255,255,255,0.15);
  border-radius: 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  user-select: none;
}
.click-area:hover{
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  transform: scale(1.02);
}
.click-area:active{
  transform: scale(0.98);
}

.click-prompt{
  font-size: clamp(16px, 3vw, 20px);
  color: #fff;
  margin-bottom: 10px;
}
.click-counter{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
}

/* 下一页面 */
.next-page{
  position: fixed;
  inset: 0;
  z-index: 200;
  display: none;
  place-items: center;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  text-align: center;
}
.next-page.show{ display: grid; }

.next-content h1{
  font-size: clamp(24px, 6vw, 48px);
  color: #fff;
  margin: 0 0 20px;
  text-shadow: 0 8px 30px rgba(227,29,45,.4);
}
.next-content p{
  font-size: clamp(16px, 3vw, 20px);
  color: #f0f0f0;
  margin: 10px 0;
}

.celebration{
  font-size: clamp(24px, 5vw, 40px);
  margin-top: 20px;
}
.celebration span{
  display: inline-block;
  animation: bounce 2s infinite;
}
.celebration span:nth-child(2){ animation-delay: 0.2s; }
.celebration span:nth-child(3){ animation-delay: 0.4s; }
.celebration span:nth-child(4){ animation-delay: 0.6s; }
.celebration span:nth-child(5){ animation-delay: 0.8s; }

@keyframes bounce{
  0%, 20%, 50%, 80%, 100%{ transform: translateY(0); }
  40%{ transform: translateY(-20px); }
  60%{ transform: translateY(-10px); }
}

/* 页脚 */
.footer{
  position:relative;
  z-index:1;
  text-align:center;
  padding: 16px 0 28px;
  color:#d9d9d9;
  opacity:.9;
}

/* 响应式微调 */
@media (max-width:480px){
  .opening-inner{ padding:18px 14px; }
  .hero-inner{ padding:22px 16px; }
  .invite-buttons{ flex-direction: column; align-items: center; }
  .track{ height: 60px; }
  .boat{ width: 40px; height: 40px; }
  .boat-avatar{ width: 30px; height: 30px; }
}

.btn::before{
  content:"";
  position:absolute; inset:-2px;
  border-radius:999px;
  background: linear-gradient(90deg, var(--red), #ff8f90, var(--white));
  z-index:-1;
  filter: blur(10px);
  opacity:.35;
}
.btn:hover{ transform: translateY(-1px); box-shadow: 0 16px 38px rgba(227,29,45,.35); }
.btn:active{ transform: translateY(0); }

.btn-accept{ background: linear-gradient(180deg, #4ade80, #22c55e); }
.btn-decline{ background: linear-gradient(180deg, #f87171, #ef4444); }
.btn-restart{ background: linear-gradient(180deg, #60a5fa, #3b82f6); }

/* 飘动的爱心 */
.floating-hearts{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.floating-hearts span{
  position:absolute;
  bottom:-10%;
  font-size: clamp(14px, 3.2vw, 22px);
  color:#ff6b8f;
  text-shadow: 0 6px 24px rgba(255,107,143,.55);
  animation: floatUp linear infinite;
  opacity:.8;
}
@keyframes floatUp{
  0%{ transform: translateY(0) translateX(0) scale(0.8); opacity:.0; }
  10%{ opacity:.9; }
  100%{ transform: translateY(-120vh) translateX(40px) scale(1.2); opacity:0; }
}
/* 随机分布与时序 */
/* 随机分布与时序 */
.floating-hearts span:nth-child(1){ left:6%;  animation-duration:10s; animation-delay:0.2s;}
.floating-hearts span:nth-child(2){ left:16%; animation-duration:12s; animation-delay:1.0s;}
.floating-hearts span:nth-child(3){ left:26%; animation-duration:11s; animation-delay:0.6s;}
.floating-hearts span:nth-child(4){ left:36%; animation-duration:13s; animation-delay:1.4s;}
.floating-hearts span:nth-child(5){ left:46%; animation-duration:10.5s; animation-delay:0.4s;}
.floating-hearts span:nth-child(6){ left:56%; animation-duration:12.3s; animation-delay:1.2s;}
.floating-hearts span:nth-child(7){ left:66%; animation-duration:11.6s; animation-delay:0.8s;}
.floating-hearts span:nth-child(8){ left:76%; animation-duration:13.2s; animation-delay:1.6s;}
.floating-hearts span:nth-child(9){ left:86%; animation-duration:10.8s; animation-delay:0.3s;}
.floating-hearts span:nth-child(10){ left:12%; animation-duration:12.8s; animation-delay:1.1s;}
.floating-hearts span:nth-child(11){ left:52%; animation-duration:11.2s; animation-delay:0.7s;}
.floating-hearts span:nth-child(12){ left:72%; animation-duration:13.6s; animation-delay:1.7s;}

/* 主视觉区域 */
.hero{
  position:relative;
  z-index:1;
  min-height:100vh;
  display:grid;
  place-items:center;
  text-align:center;
  padding: 80px 16px 40px;
}
.hero-inner{
  max-width: 900px;
  width: min(92%, 900px);
  padding: 28px 22px;
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.12);
  border-radius:18px;
  backdrop-filter: blur(6px);
  box-shadow: 0 20px 60px rgba(0,0,0,.35), inset 0 0 60px rgba(255,255,255,0.03);
}
.hero-title{
  font-size: clamp(28px, 6vw, 64px);
  margin: 8px 0 6px;
  color:#fff;
  text-shadow: 0 8px 34px rgba(227,29,45,.4);
}
.hero-subtitle{
  font-size: clamp(16px, 3.2vw, 20px);
  line-height:1.8;
  color:#f3f3f3;
  margin: 10px 0 6px;
}
.hero-note{
  font-size: clamp(14px, 2.8vw, 18px);
  color:#ffe5a8;
  margin: 8px 0 0;
}

/* 模态弹窗 */
.modal{
  position: fixed;
  inset: 0;
  z-index: 100;
  display: none;
  place-items: center;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(8px);
}
.modal.show{ display: grid; }

.modal-content{
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  border: 1px solid rgba(255,255,255,0.2);
  border-radius: 20px;
  padding: 30px 25px;
  text-align: center;
  max-width: 90vw;
  width: 400px;
  backdrop-filter: blur(10px);
  box-shadow: 0 25px 50px rgba(0,0,0,0.5);
}

.invite-title{
  font-size: clamp(20px, 4vw, 28px);
  color: #fff;
  margin: 0 0 15px;
}
.invite-text{
  font-size: clamp(16px, 3vw, 18px);
  color: #f0f0f0;
  margin: 0 0 8px;
}
.invite-subtitle{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
  margin: 0 0 20px;
}
.invite-buttons{
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

/* 游戏容器 */
.game-container{
  position: fixed;
  inset: 0;
  z-index: 50;
  display: none;
  flex-direction: column;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  padding: 20px;
  overflow: hidden;
}
.game-container.show{ display: flex; }

.game-header{
  text-align: center;
  margin-bottom: 20px;
}
.game-header h2{
  font-size: clamp(18px, 4vw, 24px);
  color: #fff;
  margin: 0 0 8px;
}
.game-header p{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
  margin: 0;
}

/* 赛道 */
.race-track{
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 20px;
  justify-content: center;
  max-height: 300px;
}

.track{
  position: relative;
  height: 80px;
  background: linear-gradient(90deg, #1e293b 0%, #334155 50%, #1e293b 100%);
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.1);
  overflow: hidden;
}

.track-label{
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: bold;
  color: #fff;
  font-size: clamp(14px, 2.5vw, 16px);
}

.boat{
  position: absolute;
  left: 60px;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  background: #e31d2d;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: left 0.1s ease;
  box-shadow: 0 4px 15px rgba(227,29,45,0.4);
}

.boat-avatar{
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

.avatar-fallback{
  font-size: 24px;
  display: none;
}

.finish-line{
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
}

/* 点击区域 */
.click-area{
  margin: 20px 0;
  padding: 40px 20px;
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
  border: 2px solid rgba(255,255,255,0.15);
  border-radius: 15px;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  user-select: none;
}
.click-area:hover{
  background: linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06));
  transform: scale(1.02);
}
.click-area:active{
  transform: scale(0.98);
}

.click-prompt{
  font-size: clamp(16px, 3vw, 20px);
  color: #fff;
  margin-bottom: 10px;
}
.click-counter{
  font-size: clamp(14px, 2.5vw, 16px);
  color: #ffd166;
}

/* 下一页面 */
.next-page{
  position: fixed;
  inset: 0;
  z-index: 200;
  display: none;
  place-items: center;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  text-align: center;
}
.next-page.show{ display: grid; }

.next-content h1{
  font-size: clamp(24px, 6vw, 48px);
  color: #fff;
  margin: 0 0 20px;
  text-shadow: 0 8px 30px rgba(227,29,45,.4);
}
.next-content p{
  font-size: clamp(16px, 3vw, 20px);
  color: #f0f0f0;
  margin: 10px 0;
}

.celebration{
  font-size: clamp(24px, 5vw, 40px);
  margin-top: 20px;
}
.celebration span{
  display: inline-block;
  animation: bounce 2s infinite;
}
.celebration span:nth-child(2){ animation-delay: 0.2s; }
.celebration span:nth-child(3){ animation-delay: 0.4s; }
.celebration span:nth-child(4){ animation-delay: 0.6s; }
.celebration span:nth-child(5){ animation-delay: 0.8s; }

@keyframes bounce{
  0%, 20%, 50%, 80%, 100%{ transform: translateY(0); }
  40%{ transform: translateY(-20px); }
  60%{ transform: translateY(-10px); }
}

/* 页脚 */
.footer{
  position:relative;
  z-index:1;
  text-align:center;
  padding: 16px 0 28px;
  color:#d9d9d9;
  opacity:.9;
}

/* 响应式微调 */
@media (max-width:480px){
  .opening-inner{ padding:18px 14px; }
  .hero-inner{ padding:22px 16px; }
  .invite-buttons{ flex-direction: column; align-items: center; }
  .track{ height: 60px; }
  .boat{ width: 40px; height: 40px; }
  .boat-avatar{ width: 30px; height: 30px; }
}


.race-track.river{
  position: relative;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 18px;
  justify-content: center;
  border-radius: 16px;
  overflow: hidden;
  border: 2px solid rgba(255,255,255,0.12);
  background:
    linear-gradient(180deg, rgba(16,34,56,0.95), rgba(10,22,40,0.98)),
    radial-gradient(800px 300px at 50% -20%, rgba(255,255,255,0.06), transparent 70%);
  box-shadow: inset 0 0 80px rgba(0,0,0,0.45);
}
.water-canvas{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  z-index: 0;
  opacity: .9;
  filter: saturate(1.05) contrast(1.05);
}

/* 航线（在水面之上） */
.lane{
  position: relative;
  z-index: 1;
  height: 88px;
  border: 2px dashed rgba(255,255,255,0.16);
  border-left: none; border-right: none;
  background: linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
  overflow: hidden;
}
.track-label{
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: bold;
  color: #fff;
  font-size: clamp(14px, 2.5vw, 16px);
  text-shadow: 0 3px 10px rgba(0,0,0,.35);
}
.finish-line{
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 24px;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,.4));
}

/* 船体与划桨（更精致、更小的桨） */
.boat{
  position: absolute;
  left: 60px;
  top: 50%;
  transform: translateY(-50%);
  width: 78px;
  height: 50px;
  display: grid;
  place-items: center;
  transition: left 0.1s linear;
  animation: bob 2.6s ease-in-out infinite;
}
@keyframes bob{
  0%,100%{ transform: translateY(-50%) rotate(-0.6deg); }
  50%{ transform: translateY(calc(-50% - 2px)) rotate(0.6deg); }
}
.boat.boost{
  animation-duration: 1.6s;
}

/* 细长船体 + 船头 */
.hull{
  position: relative;
  width: 68px;
  height: 22px;
  background: linear-gradient(180deg, #b45309, #8b3e0a);
  border-radius: 12px 18px 18px 12px;
  box-shadow: 0 6px 16px rgba(0,0,0,0.35), inset 0 -4px 8px rgba(0,0,0,0.25);
}
.hull::after{
  content:"";
  position:absolute;
  right:-10px; top:4px; bottom:4px;
  width: 14px;
  background: linear-gradient(180deg, #d97706, #9a3412);
  clip-path: polygon(0 0, 100% 50%, 0 100%);
  filter: drop-shadow(0 2px 6px rgba(0,0,0,.3));
}
/* 船尾水花 */
.boat::after{
  content:"";
  position:absolute;
  left: -10px;
  top: 50%;
  transform: translateY(-50%);
  width: 22px; height: 10px;
  background: radial-gradient(10px 6px at 70% 50%, rgba(255,255,255,0.7), rgba(255,255,255,0) 70%);
  opacity: .55;
  animation: wake 1.4s linear infinite;
  filter: blur(0.2px);
}
.boat.boost::after{ animation-duration: 0.8s; opacity: .75; }
@keyframes wake{
  0%{ transform: translateY(-50%) translateX(0) scale(1); opacity:.55; }
  100%{ transform: translateY(-50%) translateX(-18px) scale(0.8); opacity:0; }
}

/* 船上头像（坐在船中央） */
.boat-avatar{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-60%);
  width: 30px; height: 30px;
  border-radius: 50%;
  border: 2px solid #fff;
  object-fit: cover;
  box-shadow: 0 6px 14px rgba(0,0,0,.35);
}
.avatar-fallback{
  position: absolute;
  left: 50%; top: 50%;
  transform: translate(-50%,-60%);
  font-size: 18px;
  display: none;
}

/* 更小更自然的划桨 */
.paddle{
  position: absolute;
  width: 24px; height: 6px;
  background: #9ca3af;
  top: 50%;
  transform-origin: 6px 3px; /* 更靠近船体的支点 */
  border-radius: 5px;
  box-shadow: 0 2px 6px rgba(0,0,0,.25);
}
.paddle::after{ /* 桨叶 */
  content:"";
  position: absolute;
  right:-8px; top:-3px;
  width: 10px; height: 10px;
  background: #e5e7eb;
  border-radius: 3px 8px 8px 3px;
  box-shadow: inset 0 -1px 2px rgba(0,0,0,.2);
}
.paddle.left{ left: -2px; transform: translateY(-50%) rotate(-16deg); }
.paddle.right{ left: 6px; transform: translateY(-50%) rotate(16deg); }

@keyframes rowL{
  0%{ transform: translateY(-50%) rotate(-16deg); }
  50%{ transform: translateY(-50%) rotate(16deg); }
  100%{ transform: translateY(-50%) rotate(-16deg); }
}
@keyframes rowR{
  0%{ transform: translateY(-50%) rotate(16deg); }
  50%{ transform: translateY(-50%) rotate(-16deg); }
  100%{ transform: translateY(-50%) rotate(16deg); }
}
.boat .paddle.left{ animation: rowL .7s ease-in-out infinite; }
.boat .paddle.right{ animation: rowR .7s ease-in-out infinite; }
.boat.boost .paddle.left{ animation-duration: .28s; }
.boat.boost .paddle.right{ animation-duration: .28s; }

/* 观众区（保留） */
.crowd{
  z-index: 2;
  height: 86px;
  margin-top: 12px;
  border-radius: 12px;
  border: 2px solid rgba(255,255,255,0.12);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)),
    radial-gradient(600px 180px at 50% 120%, rgba(227,29,45,.18), transparent 70%);
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 6px;
  padding: 8px;
  overflow: hidden;
}

/* 小屏优化 */
@media (max-width:480px){
  .lane{ height: 70px; }
  .boat{ width: 68px; height: 46px; }
  .hull{ width: 60px; height: 20px; }
  .boat-avatar{ width: 26px; height: 26px; }
  .paddle{ width: 20px; height: 5px; }
  .paddle::after{ width: 9px; height: 9px; }
}


/* 下一页面（花园与非洲菊）样式 */

.next-page{
  position: fixed;
  inset: 0;
  z-index: 200;
  display: none;
  place-items: center;
  background: linear-gradient(180deg, #0b0e12 0%, #090c10 60%, #070a0d 100%);
  text-align: center;
}
.next-page.show{ display: grid; }

.next-content h1{
  font-size: clamp(24px, 6vw, 48px);
  color: #fff;
  margin: 0 0 12px;
  text-shadow: 0 8px 30px rgba(227,29,45,.4);
}
.next-content p{
  font-size: clamp(16px, 3vw, 20px);
  color: #f0f0f0;
  margin: 8px 0;
}
.next-instruction{
  color:#ffd166;
  opacity: .95;
  margin-top: 6px;
}

.garden{
  position: relative;
  width: min(92vw, 900px);
  height: min(60vh, 520px);
  margin: 14px auto 6px;
  border-radius: 18px;
  background:
    radial-gradient(800px 400px at 50% -10%, rgba(255,255,255,.06), transparent 70%),
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 0 80px rgba(0,0,0,.35);
  overflow: hidden;
}
/* 覆盖：去掉土壤层 */
.garden::after{
  display: none !important;
  content: none !important;
  height: 0 !important;
  border-top: 0 !important;
  box-shadow: none !important;
}

/* 单朵花容器，绝对定位到花园内某处 */
.flower{
  position: absolute;left: 800px;
  width: 160px; height: 160px;
  transform: translate(-50%, -50%) scale(0.72);
  animation: bloomIn .9s cubic-bezier(.2,.9,.2,1) forwards;
  filter: drop-shadow(0 16px 34px rgba(0,0,0,.35));
}
@keyframes bloomIn{
  0%{ transform: translate(-50%,-50%) scale(0.2) rotate(-8deg); opacity: 0; }
  60%{ transform: translate(-50%,-50%) scale(1.05) rotate(2deg); opacity: 1; }
  100%{ transform: translate(-50%,-50%) scale(1) rotate(0deg); opacity: 1; }
}

/* 花的 SVG 布局优化 */
.flower svg{
  width: 100%; height: 100%;
  overflow: visible;
}

/* 新增：茎叶轻微摆动（对 SVG 的组使用） */
.stem-group{
  transform-origin: 50% 100%;
  transform-box: fill-box;
  animation: sway 4.2s ease-in-out infinite;
}
.boost .stem-group{ animation-duration: 2.6s; }
@keyframes sway{
  0%,100%{ transform: rotate(-1.5deg); }
  50%{ transform: rotate(1.5deg); }
}

/* 根系线条淡化在土壤中 */
.root{
  opacity: 0.55;
  filter: blur(0.1px);
}

/* 花粉微光 - 重命名避免冲突 */
.sparkle-old{
  position: absolute;
  width: 6px; height: 6px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255,255,255,0.9), rgba(255,255,255,0));
  pointer-events: none;
  animation: floatUpSmall 1.4s ease-out forwards;
  filter: drop-shadow(0 2px 6px rgba(255,255,255,.6));
}
@keyframes floatUpSmall{
  0%{ transform: translate(-50%,-50%) translateY(0) scale(0.6); opacity: 0.0; }
  25%{ opacity: 1; }
  100%{ transform: translate(-50%,-50%) translateY(-24px) scale(1); opacity: 0; }
}

/* 小屏适配 */
@media (max-width:480px){
  .garden{ height: 52vh; }
  .flower{ width: 140px; height: 140px; }
}


/* 花园样式 - 移除重复定义 */
.garden{
  position: relative;
  width: min(92vw, 900px);
  height: min(60vh, 520px);
  margin: 14px auto 6px;
  border-radius: 18px;
  background:
    radial-gradient(800px 400px at 50% -10%, rgba(255,255,255,.06), transparent 70%),
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
  border: 1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 0 80px rgba(0,0,0,.35);
  overflow: hidden;
}

/* 完全移除土壤层 */
.garden::after{ display: none !important; }

/* 花朵生长容器 */
.flower-growth{
  position: absolute;
  width: 200px; 
  height: 250px; /* 增加高度以容纳完整的茎+花 */
  transform: translate(-50%, -50%);
  pointer-events: none;
  --stem-h: 130px; /* 新增：茎的最终高度（与动画一致） */
  --flower-offset-x: 50px; /* 新增：花朵相对茎的水平偏移（向右为正） */
}

/* 种子阶段 */
.seed{
  position: absolute;
  bottom: 40%;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 8px;
  background: radial-gradient(circle, #8b4513, #654321);
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0,0,0,0.6);
  animation: seedFall 0.8s ease-out forwards;
}

@keyframes seedFall{
  0%{ transform: translateX(-50%) translateY(-100px) scale(0.5); opacity: 0; }
  60%{ transform: translateX(-50%) translateY(10px) scale(1.1); opacity: 1; }
  100%{ transform: translateX(-50%) translateY(0) scale(1); opacity: 1; }
}

/* 萌发阶段 */
.sprout{
  position: absolute;
  bottom: 40%;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  animation: sproutEmerge 1.2s ease-out 0.8s forwards;
}

.sprout-tip{
  width: 4px;
  height: 12px;
  background: linear-gradient(to top, #228b22, #90ee90);
  border-radius: 2px 2px 50% 50%;
  transform-origin: bottom center;
  animation: sproutGrow 1s ease-out 2s forwards;
}

@keyframes sproutEmerge{
  0%{ opacity: 0; transform: translateX(-50%) scale(0.3); }
  100%{ opacity: 1; transform: translateX(-50%) scale(1); }
}

@keyframes sproutGrow{
  0%{ transform: scaleY(0.3); }
  100%{ transform: scaleY(1); }
}

/* 茎叶生长阶段 - 确保茎在正中心 */
.stem-growing{
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  animation: stemAppear 0.5s ease-out 3s forwards;
}

.stem{
  width: 8px; /* 稍微加粗茎部 */
  height: 0;
  background: linear-gradient(to top, #228b22, #32cd32);
  border-radius: 4px;
  margin: 0 auto;
  animation: stemGrow 2s ease-out 3.5s forwards;
}

.leaf{
  position: absolute;
  width: 20px;
  height: 12px;
  background: linear-gradient(45deg, #228b22, #90ee90);
  border-radius: 50% 10px 50% 10px;
  opacity: 0;
  transform-origin: right center;
}

.leaf.left{
  left: -20px;
  top: 50px; /* 调整叶片在茎上的位置 */
  animation: leafGrowLeft 0.8s ease-out 4.5s forwards;
}

.leaf.right{
  right: -20px;
  top: 70px; /* 调整叶片在茎上的位置 */
  animation: leafGrowRight 0.8s ease-out 5s forwards;
}

@keyframes stemAppear{
  0%{ opacity: 0; }
  100%{ opacity: 1; }
}

@keyframes stemGrow{
  0%{ height: 0; }
  100%{ height: 130px; } /* 增加茎的高度以更好连接花朵 */
}

@keyframes leafGrowLeft{
  0%{ opacity: 0; transform: scale(0) rotate(-45deg); }
  100%{ opacity: 1; transform: scale(1) rotate(-15deg); }
}

@keyframes leafGrowRight{
  0%{ opacity: 0; transform: scale(0) rotate(45deg); }
  100%{ opacity: 1; transform: scale(1) rotate(15deg); }
}

/* 花苞阶段 - 精确对齐茎顶部 */
.bud{
  position: absolute;
  bottom: calc(20px + var(--stem-h) - 10px); /* 茎底(20px) + 茎高 - 半个花苞高 */
  left: 50%;
  transform: translateX(-50%);
  width: 16px;
  height: 20px;
  opacity: 0;
  animation: budForm 1s ease-out 5.5s forwards;
}

.bud-outer{
  width: 100%;
  height: 100%;
  background: linear-gradient(to top, #228b22, #90ee90);
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  animation: budGrow 1.5s ease-out 6.5s forwards;
}

@keyframes budForm{
  0%{ opacity: 0; transform: translateX(-50%) scale(0.3); }
  100%{ opacity: 1; transform: translateX(-50%) scale(1); }
}

@keyframes budGrow{
  0%{ transform: scale(1); }
  50%{ transform: scale(1.3); }
  100%{ transform: scale(1.5); }
}

/* 绽放阶段 - 精确对齐茎顶部 */
.flower-bloom{
  position: absolute;
  bottom: calc(20px + var(--stem-h) - 80px); /* 80=花朵高度的一半(160/2) */
  left: calc(50% + var(--flower-offset-x));  /* 新增：向右偏移 50px */
  transform: translateX(-50%);
  width: 160px;
  height: 160px;
  opacity: 0;
  animation: flowerBloom 2s ease-out 8s forwards;
}

@keyframes flowerBloom{
  0%{ 
    opacity: 0; 
    transform: translateX(-50%) scale(0.1) rotate(-180deg); 
  }
  30%{ 
    opacity: 0.7; 
    transform: translateX(-50%) scale(0.6) rotate(-90deg); 
  }
  70%{ 
    opacity: 1; 
    transform: translateX(-50%) scale(1.1) rotate(0deg); 
  }
  100%{ 
    opacity: 1; 
    transform: translateX(-50%) scale(1) rotate(0deg); 
  }
}

/* 修复SVG容器样式 */
.flower-bloom svg{
  width: 100%;
  height: 100%;
  overflow: visible; /* 确保SVG内容完全可见 */
}

/* 花瓣层层绽放效果 */
.petal-layer{
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  opacity: 0;
}

.petal-layer.layer1{ animation: petalLayer1 0.6s ease-out 8.2s forwards; }
.petal-layer.layer2{ animation: petalLayer2 0.6s ease-out 8.6s forwards; }
.petal-layer.layer3{ animation: petalLayer3 0.6s ease-out 9s forwards; }

@keyframes petalLayer1{
  0%{ opacity: 0; transform: translate(-50%, -50%) scale(0.3); }
  100%{ opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

@keyframes petalLayer2{
  0%{ opacity: 0; transform: translate(-50%, -50%) scale(0.5) rotate(15deg); }
  100%{ opacity: 0.9; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
}

@keyframes petalLayer3{
  0%{ opacity: 0; transform: translate(-50%, -50%) scale(0.7) rotate(-15deg); }
  100%{ opacity: 0.8; transform: translate(-50%, -50%) scale(1) rotate(0deg); }
}

/* 花心显现 */
.flower-center{
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 30px;
  height: 30px;
  border-radius: 50%;
  opacity: 0;
  animation: centerAppear 0.8s ease-out 9.5s forwards;
}

@keyframes centerAppear{
  0%{ opacity: 0; transform: translate(-50%, -50%) scale(0); }
  100%{ opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

/* 花粉粒子效果 */
.pollen-particle{
  position: absolute;
  width: 3px;
  height: 3px;
  background: rgba(255, 209, 102, 0.8);
  border-radius: 50%;
  pointer-events: none;
  animation: pollenFloat 3s ease-out infinite;
}

@keyframes pollenFloat{
  0%{ 
    transform: translate(0, 0) scale(0.5); 
    opacity: 0; 
  }
  20%{ 
    opacity: 1; 
    transform: translate(0, -10px) scale(1); 
  }
  100%{ 
    opacity: 0; 
    transform: translate(var(--pollen-x, 20px), var(--pollen-y, -50px)) scale(0.3); 
  }
}

/* 成长完成的轻微摇摆 */
.flower-mature{
  animation: gentleSway 4s ease-in-out infinite;
}

@keyframes gentleSway{
  0%, 100%{ transform: translateX(-50%) rotate(-2deg); }
  50%{ transform: translateX(-50%) rotate(2deg); }
}

/* 微光环绕效果 - 与花朵同步 */
.sparkle-ring{
  position: absolute;
  bottom: calc(20px + var(--stem-h) - 80px);
  left: calc(50% + var(--flower-offset-x));  /* 新增：向右偏移 50px */
  transform: translateX(-50%);
  width: 180px;
  height: 180px;
  opacity: 0;
  animation: sparkleRing 0.5s ease-out 10s forwards;
}

@keyframes sparkleRing{
  0%{ opacity: 0; transform: translateX(-50%) scale(0.5); }
  100%{ opacity: 1; transform: translateX(-50%) scale(1); }
}

.sparkle{
  position: absolute;
  width: 4px;
  height: 4px;
  background: radial-gradient(circle, rgba(255,255,255,0.9), rgba(255,255,255,0));
  border-radius: 50%;
  animation: sparkleOrbit 2s linear infinite;
}

@keyframes sparkleOrbit{
  0%{ transform: rotate(0deg) translateX(60px) rotate(0deg); opacity: 0; }
  25%{ opacity: 1; }
  75%{ opacity: 1; }
  100%{ transform: rotate(360deg) translateX(60px) rotate(-360deg); opacity: 0; }
}

/* 小屏适配 */
@media (max-width:480px){
  .flower-growth{ width: 160px; height: 200px; --stem-h: 100px; }
  .flower-bloom{ width: 120px; height: 120px; bottom: calc(20px + var(--stem-h) - 60px); left: calc(50% + var(--flower-offset-x)); }
  .sparkle-ring{ width: 140px; height: 140px; bottom: calc(20px + var(--stem-h) - 60px); left: calc(50% + var(--flower-offset-x)); }
  .stem{ width: 6px; }
  @keyframes stemGrow{
    0%{ height: 0; }
    100%{ height: 100px; }
  }
}